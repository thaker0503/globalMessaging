<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Chat | Technostacks</title>
</head>
<body>
    <main class="main-chat-screen">
        <ul id="chats"></ul>
    </main>
    <section>
        <form id="chatForm">
            <input type="text" name="chatInput" id="chatInput" class="chat-input" />
            <input type="submit"></input>
        </form>
    </section>

    <script>
        const chatForm = document.getElementById('chatForm');

        chatForm.addEventListener('submit',e =>{
            e.preventDefault(); 
            submitForm(event)
            })

        function submitForm(){
            // e.preventDefault();

            const timeStamp = Date.now();
            const chatInput = document.getElementById('chatInput');
            const chatMsg = chatInput.value;

            chatInput.value = "";

            let chatObj = {
                timeStamp,
                chatMsg
            }

            document.getElementById('chats').scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"});

            fetch('/chats',{
                method: "POST",
                headers:{
                    "Content-Type":"application/json"
                },
                body: JSON.stringify(chatObj)
            })
            // .then(d => d.json()).then(r => console.log(r))

        }
    </script>
</body>
</html>